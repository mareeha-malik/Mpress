{% extends 'base.html' %}
{% load static %}
{% block title %}Profile - {{ author.username }}{% endblock %}
{% block content %}
<section class="py-12 px-4 max-w-4xl mx-auto">
  <div class="bg-white/60 backdrop-blur rounded-2xl p-6 shadow border border-white/40 flex gap-6 items-center">
    <div class="w-28 h-28 rounded-full overflow-hidden">
      {% if profile and profile.avatar %}
        <img src="{{ profile.avatar.url }}" alt="{{ author.username }}" class="w-full h-full object-cover">
      {% else %}
        <img src="{% static 'pfp2.jpg' %}" alt="{{ author.username }}" class="w-full h-full object-cover">
      {% endif %}
    </div>
    <div>
      <h2 class="text-2xl font-semibold">{{ author.get_full_name|default:author.username }}</h2>
      <p class="text-sm text-gray-600 mt-2">@{{ author.username }}</p>
      <p class="mt-4 text-gray-700">{{ profile.bio|default:"No bio yet." }}</p>
      {% if request.user == author %}
        <a href="{% url 'profile_edit' %}" class="inline-block mt-4 px-4 py-2 bg-pink-500 text-white rounded-lg">Edit profile</a>
      {% endif %}
    </div>
  </div>

  <h3 class="mt-8 mb-4 font-semibold text-lg text-pink-600">Posts by {{ author.username }}</h3>
  <div class="space-y-4">
    {% for post in posts %}
      <div class="bg-white/60 backdrop-blur rounded-2xl p-4 shadow border border-white/40">
        <a href="{{ post.get_absolute_url }}" class="font-semibold text-gray-800">{{ post.title }}</a>
        <p class="text-sm text-gray-600 mt-2">{{ post.content|truncatechars:160 }}</p>
      </div>
    {% empty %}
      <p class="text-gray-600">No posts yet.</p>
    {% endfor %}
  </div>
</section>
{% endblock %}
